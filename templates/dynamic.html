<!DOCTYPE html>
<html lang="zh-ch">
<head>
    <title>表单</title>
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <script>
        // 输入检查函数
        function checkInputs() {
            const inputs = document.querySelectorAll('input[type="text"]');
            let flags = new Array(5);
            inputs.forEach(function (input) {
                const value = parseInt(input.value);
                if (!isNaN(value)) {
                    flags[value - 1] = true;
                }
            });
            let allTrue = true;
            for (let i = 0; i < flags.length; i++) {
                if (!flags[i]) {
                    allTrue = false;
                    break;
                }
            }

            if (allTrue === true) {
                document.getElementById('submitBtn').disabled = false;
                document.getElementById('errorMsg').style.display = 'none';
            } else {
                document.getElementById('submitBtn').disabled = true;
                document.getElementById('errorMsg').style.display = 'block';
            }
        }

        // 表单回传函数
        function submitForm() {
            var input1 = document.getElementById('input1').value;
            var input2 = document.getElementById('input2').value;
            var input3 = document.getElementById('input3').value;
            var input4 = document.getElementById('input4').value;
            var input5 = document.getElementById('input5').value;
            // 创建一个包含输入值的对象
            var data = {
                input1: input1,
                input2: input2,
                input3: input3,
                input4: input4,
                input5: input5
            };
            // 使用 Fetch API 或其他方式将数据发送到 Flask 业务
            fetch('/getRank', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
                .then(function (response) {
                    // 处理响应
                    console.log(response);
                })
                .catch(function (error) {
                    // 处理错误
                    console.error(error);
                });
            alert('提交成功！\n如果想更改排序请重新输入密码提交')
            window.location.href = "http://192.168.31.131/";
        }
    </script>
</head>
<!--<body>-->
<!--<form onsubmit="event.preventDefault(); submitForm();">-->
<!--    <label for="input1">{{message1}}</label>-->
<!--    <input type="text" id="input1" name="input1" oninput="checkInputs()">-->

<!--    <br>-->

<!--    <label for="input2">{{message2}}</label>-->
<!--    <input type="text" id="input2" name="input2" oninput="checkInputs()">-->

<!--    <br>-->

<!--    <label for="input3">{{message3}}</label>-->
<!--    <input type="text" id="input3" name="input3" oninput="checkInputs()">-->

<!--    <br>-->

<!--    <label for="input4">{{message4}}</label>-->
<!--    <input type="text" id="input4" name="input4" oninput="checkInputs()">-->

<!--    <br>-->

<!--    <label for="input5">{{message5}}</label>-->
<!--    <input type="text" id="input5" name="input5" oninput="checkInputs()">-->

<!--    <br>-->

<!--    <input type="submit" value="Submit" id="submitBtn" disabled>-->
<!--    <p id="errorMsg" style="color: red; display: none;">请用1-5的整数不重复的填写五个文本框</p>-->
<!--</form>-->
<!--</body>-->
<body>
<div class="container">
    <form onsubmit="event.preventDefault(); submitForm();">
        <div class="row mb-3">
            <label for="input1" class="col-sm-2 col-form-label">{{message1}}</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="input1" name="input1" oninput="checkInputs()">
            </div>
        </div>

        <div class="row mb-3">
            <label for="input2" class="col-sm-2 col-form-label">{{message2}}</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="input2" name="input2" oninput="checkInputs()">
            </div>
        </div>

        <div class="row mb-3">
            <label for="input3" class="col-sm-2 col-form-label">{{message3}}</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="input3" name="input3" oninput="checkInputs()">
            </div>
        </div>

        <div class="row mb-3">
            <label for="input4" class="col-sm-2 col-form-label">{{message4}}</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="input4" name="input4" oninput="checkInputs()">
            </div>
        </div>

        <div class="row mb-3">
            <label for="input5" class="col-sm-2 col-form-label">{{message5}}</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="input5" name="input5" oninput="checkInputs()">
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-sm-10 offset-sm-2">
                <button type="submit" class="btn btn-primary" id="submitBtn" disabled>提交</button>
            </div>
        </div>

<!--        <div class="row">-->
<!--            <div class="col-sm-10 offset-sm-2">-->
<!--                <p id="errorMsg" class="text-danger" style="display: none;">请用1-5的整数不重复填写五个文本框</p>-->
<!--            </div>-->
<!--        </div>-->
        <div class="alert alert-danger" id="errorMsg" role="alert" style="display: none;">
            <div class="col-sm-10 offset-sm-2">
                <p >请用1-5的整数不重复填写五个文本框</p>
            </div>
        </div>

    </form>
</div>
<script src="/static/bootstrap.min.js"></script>
</body>
</html>